%
% 个人自用文档样式
%


\ProvidesPackage{morelull}[2019/08/24 v0.1.2]

% 眉首眉脚
\RequirePackage{fancyhdr}
% 调色板
\RequirePackage{xcolor-material}
% 代码提示
\RequirePackage{listings}
% 版边边距
\RequirePackage[left=2cm, right=2cm, bottom=2cm]{geometry}
% 更加现代定理、引用提示
\RequirePackage{tcolorbox}
% 书签
\RequirePackage[open, openlevel=2, atend]{bookmark}
% 链接
\RequirePackage{hyperref}
\RequirePackage{xkeyval}

%%% 自定义 %%%
\colorlet{PrimaryColor}{MaterialBlue900}

%%% CTEX格式设置 %%
\ctexset{
  today=big,
  contentsname={文章导航},
  section/format=\Large\bfseries\centering\color{PrimaryColor},
  subsection/number={\textcolor{MaterialBlue900}{\thesubsection}},
}

%%% 字体设置 %%%
\setmonofont{Fantasque Sans Mono}
\setCJKmainfont{方正书宋_GBK}
\setCJKsansfont{方正书宋_GBK}

%%% 链接设置 %%%
\hypersetup{
  colorlinks=true,
  linkcolor=MaterialPink,
  urlcolor=MaterialBlue,
  filecolor=MaterialGreen,
}

%%% 代码高亮设置 %%%
\tcbuselibrary{listings}

\lstset{
  frame=single,
  frameround=tttt,
  framesep=1pt,
  framextopmargin=6pt,
  framexbottommargin=6pt,
  tabsize=4,
  breaklines=true,
  upquote=true,
  captionpos=b,
  basicstyle=\footnotesize,
  backgroundcolor=\color{MaterialBlue50},
  rulecolor=\color{MaterialBlue},
  identifierstyle=\color{MaterialBlue800},
  commentstyle=\itshape\color{MaterialGreen700},
  stringstyle=\bfseries\color{MaterialAmber800},
  keywordstyle=\bfseries\color{MaterialPurple700},
  numberstyle=\bfseries\color{MaterialGrey800},
}

\lstdefinelanguage{javascript}{
  morekeywords={const, let, class, Promise, try, catch, Error, async, await, super, constructor},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]",
  morestring=[b]`,
}
\lstalias{js}{javascript}

%%% 页眉页脚设置 %%%
\pagestyle{fancy}
\fancyhead[L]{\textcolor{PrimaryColor}{\leftmark}}
\fancyhead[C]{\textcolor{PrimaryColor}{第 \thepage 页}}
\fancyhead[R]{\textcolor{PrimaryColor}{\rightmark}}
\fancyfoot{}
\renewcommand{\headrule}{\color{PrimaryColor}\hrule width\textwidth}

%%% tcolorbox %%%
\tcbuselibrary{theorems}
\tcbuselibrary{skins}
\tcbsetforeverylayer{enhanced}

%%% 自定义命令 %%%
% 专名号
\providecommand\vlmk[1]{%
  \CJKunderline{#1}%
}

% 着重号
\providecommand\vovs[1]{%
  \CJKunderdot{\heiti{#1}}%
}

% 内联代码，单一颜色
\providecommand\code[1]{%
  \ttfamily\textcolor{MaterialPink}{#1}
}

%%% 自定义环境 %%%
% 引用
\newenvironment{yiys}
{\begin{quote}\kaishu\small}
{\end{quote}}

% 定理
\newtcbtheorem[number within=section]{dkli}{定理}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialGreen50,
  colframe=MaterialGreen,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialGreen}
}{}

% 结论
\newtcbtheorem[number within=section]{jply}{结论}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialTeal50,
  colframe=MaterialTeal,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialTeal}
}{}

% 命题
\newtcbtheorem[number within=section]{mkti}{命题}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialBlueGrey50,
  colframe=MaterialBlueGrey,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialBlueGrey}
}{}

% 定义
\newtcbtheorem[number within=section]{dkyi}{定义}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  colback=MaterialCyan50,
  before upper={\parindent2em},
  colframe=MaterialCyan,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialCyan}
}{}

% 内置提示框
\newtcolorbox{tiuikl}[1]{
  skin=empty,
  top=0pt,
  bottom=0pt,
  toprule=0pt,
  bottomrule=0pt,
  leftrule=0pt,
  rightrule=0pt,
  borderline west={2pt}{0pt}{#1},
}

% 提示
\newenvironment{tiui}
{\begin{tiuikl}{MaterialBlue}
      \textcolor{MaterialBlue}{\heiti{提示：}}
}
{\end{tiuikl}}

% 提醒
\newenvironment{tixk}
{\begin{tiuikl}{MaterialDeepOrange}
      \textcolor{MaterialDeepOrange}{\heiti{提醒：}}
}
{\end{tiuikl}}

% 注意
\newenvironment{vuyi}
{\begin{tiuikl}{MaterialRed}
      \textcolor{MaterialRed}{\heiti{注意：}}
}
{\end{tiuikl}}